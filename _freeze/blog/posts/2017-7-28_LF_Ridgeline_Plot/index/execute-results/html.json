{
  "hash": "689eb447acdc1ab5375c1c7faa55de85",
  "result": {
    "markdown": "---\ntitle: Ridgeline Length Frequency Plots\ndescription: How to visualize multiple length frequencies as ridgline plots.\nauthor: Derek H. Ogle\ndate: 7/28/2017\nimage: preview.png\ncategories:\n  - Length Frequency\n  - Size\n  - ggplot2\n---\n\n\n:::{.callout-note}\nThe following packages are loaded for use below. I also set the default `ggplot` theme to `theme_bw()` for a classic \"black-and-white\" plot (rather than the default plot with a gray background).\n:::\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(FSA)\nlibrary(dplyr)        # for filter(), mutate(), select()\nlibrary(ggplot2)\nlibrary(ggridges)     # for geom_density_ridges(), stat_density_ridges(), et al.\ntheme_set(theme_bw())\n```\n:::\n\n\n&nbsp;\n\n# Lake Superior Kiyi\n[Wilke](https://wilkelab.org/ggridges/articles/introduction.html) described ridgeline plots as \"partially overlapping line plots that create the impression of a mountain range.\" I would describe them as partially overlapping density plots (akin to a smoothed histogram).\n\nI thought that ridgeline plots might provide a nice visualization of length frequencies over time. For example, @lepaketal_2017 examined (among other things) the lengths of Kiyi (*Coregonus kiyi*) captured in trawl tows in Lake Superior from 2003 to 2014. The length frequency data used in that paper is shown below (and stored in the `lf` object). @fig-kiyihist is a modified version^[Stripped of code that increased fonts, changed colors, etc.] of the length frequency histograms we included in the paper.\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output .cell-output-stdout}\n```{.output}\n#R|       year mon  tl\n#R|  1    2003 May 183\n#R|  2    2003 May 259\n#R|  3    2004 May 200\n#R|  9149 2004 Jul  77\n#R|  9150 2004 Jul  87\n#R|  9151 2004 Jul  81\n```\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Histograms of the total lengths of Lake Superior Kiyi from 2003 to 2014.](index_files/figure-html/fig-kiyihist-1.png){#fig-kiyihist fig-align='center' fig-alt='Histograms of the total lengths of Lake Superior Kiyi from 2003 to 2014.' width=672}\n:::\n:::\n\n\n&nbsp;\n\n@fig-kiyirl is a near default joyplot of the same data.\n \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(lf,aes(x=tl,y=year)) +\n  geom_density_ridges() +\n  scale_x_continuous(name=\"Total Length (mm)\") +\n  scale_y_discrete(expand=expansion(mult=c(0.01,0.16))) +\n  theme(axis.title.y=element_blank())\n```\n\n::: {.cell-output-display}\n![Ridgelinle plot of the total lengths of Lake Superior Kiyi from 2003 to 2014.](index_files/figure-html/fig-kiyirl-1.png){#fig-kiyirl fig-align='center' fig-alt='Ridgelinle plot of the total lengths of Lake Superior Kiyi from 2003 to 2014.' width=672}\n:::\n:::\n\n\n&nbsp;\n\nIn my opinion, it is easier on the ridgeline plot to follow the strong year-classes that first appear in 2004 and 2010 through time and to see how fish in the strong year-classes grow and eventually merge in size with older fish. Thus, ridgeline plots look useful for displaying length (or age) data across many groups (years, locations, etc.).^[[Wilke](https://wilkelab.org/ggridges/articles/introduction.html)illustrates many possible modifications to the ridgeline plots including adding data points, show summary statistics, or using histograms rather than densities.]\n\n&nbsp;\n\n# Lake Erie Walleye\nThe following code use the `WalleyeErie2` data frame built-in to `FSA`. This provides an example with data that you can run on your own. I include some bells-and-whistles from [Wilke's demonstration](https://wilkelab.org/ggridges/articles/introduction.html).\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# reduce data to one location and make sure year variable is a factor\ndata(WalleyeErie2,package=\"FSAdata\")\nwe2 <- WalleyeErie2 |>\n  filter(loc==2) |>\n  mutate(fyear=as.factor(year))\n\nggplot(we2,aes(x=tl,y=fyear,fill=0.5-abs(0.5-after_stat(ecdf)))) +\n  stat_density_ridges(geom=\"density_ridges_gradient\",calc_ecdf=TRUE,scale=1) +\n  scale_x_continuous(name=\"Total Length (mm)\") +\n  scale_y_discrete(expand=expansion(mult=c(0.01,0.05))) +\n  scale_fill_viridis_c(name=\"Tail Probability\",guide=\"none\") +\n  theme(axis.title.y=element_blank())\n```\n\n::: {.cell-output-display}\n![Ridgelinle plot of the total lengths of Lake Erie Walleye from 2003 to 2014.](index_files/figure-html/fig-waerl-1.png){#fig-waerl fig-align='center' fig-alt='Ridgelinle plot of the total lengths of Lake Erie Walleye from 2003 to 2014.' width=672}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}